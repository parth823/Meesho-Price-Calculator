<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flipkart Price Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        .transition-all { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body class="bg-slate-100 min-h-screen p-4 md:p-8">

    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <header class="mb-10 flex flex-col md:flex-row md:items-end justify-between gap-4">
            <div>
                <h1 class="text-3xl font-black text-slate-900 tracking-tight flex items-center gap-2">
                    Flipkart <span class="text-blue-600">Rate Card</span> Pricing
                </h1>
                <p class="text-slate-500 mt-1 font-medium">Professional Profitability Calculator & SKU Pricing Tool</p>
            </div>
            <div class="flex items-center gap-4 bg-white p-2 px-4 rounded-full shadow-sm border border-slate-200">
                <div class="flex items-center gap-2 text-xs font-bold text-slate-600">
                    <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                    CALC ENGINE ACTIVE
                </div>
                <div class="h-4 w-[1px] bg-slate-200"></div>
                <div class="text-xs text-slate-400">v3.0.0 (JS)</div>
            </div>
        </header>

        <!-- Calculators Container -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Calculator Card 1 -->
            <div id="card-1" class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden flex flex-col h-full">
                <div class="p-6 border-b border-slate-50 flex justify-between items-center bg-slate-50/50">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-xl bg-blue-600 flex items-center justify-center text-white shadow-lg shadow-blue-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>
                        </div>
                        <h2 class="text-lg font-bold text-slate-800">Primary Product</h2>
                    </div>
                    <div class="text-[10px] font-bold bg-blue-100 text-blue-700 px-2 py-1 rounded uppercase">SKU A</div>
                </div>

                <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-1">
                    <!-- Inputs -->
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Product Cost (₹)</label>
                        <input type="number" data-calc="1" data-field="cost" value="100" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-blue-500 outline-none font-medium">
                    </div>
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Marketplace Fee (₹)</label>
                        <input type="number" data-calc="1" data-field="commission" value="15" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-blue-500 outline-none font-medium">
                    </div>
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Shipping (₹)</label>
                        <input type="number" data-calc="1" data-field="shipping" value="40" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-blue-500 outline-none font-medium">
                    </div>
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Packaging (₹)</label>
                        <input type="number" data-calc="1" data-field="packaging" value="10" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-blue-500 outline-none font-medium">
                    </div>
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Return Rate (%)</label>
                        <input type="number" data-calc="1" data-field="returnRate" value="10" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-blue-500 outline-none font-medium">
                    </div>
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Promo Rate (%)</label>
                        <input type="number" data-calc="1" data-field="promoRate" value="10" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-blue-500 outline-none font-medium">
                    </div>
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Target Profit (₹)</label>
                        <input type="number" data-calc="1" data-field="margin" value="50" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-blue-500 outline-none font-medium">
                    </div>
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">GST Rate</label>
                        <select data-calc="1" data-field="gstRate" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-blue-500 outline-none cursor-pointer font-medium appearance-none">
                            <option value="0">0% (Exempt)</option>
                            <option value="0.05">5%</option>
                            <option value="0.12">12%</option>
                            <option value="0.18" selected>18%</option>
                            <option value="0.28">28%</option>
                        </select>
                    </div>
                </div>

                <!-- Card 1 Footer / Results -->
                <div class="mt-auto bg-slate-900 p-6 text-white">
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="p-3 bg-slate-800/50 rounded-xl border border-slate-700/50">
                            <p class="text-slate-400 text-[10px] uppercase font-bold tracking-widest mb-1">Pre-GST Total</p>
                            <p id="total-1" class="text-xl font-mono">₹0.00</p>
                        </div>
                        <div class="p-3 bg-slate-800/50 rounded-xl border border-slate-700/50">
                            <p class="text-slate-400 text-[10px] uppercase font-bold tracking-widest mb-1">GST Tax</p>
                            <p id="gst-1" class="text-xl font-mono text-blue-400">₹0.00</p>
                        </div>
                    </div>
                    <div class="relative">
                        <div class="flex justify-between items-end mb-2">
                            <div>
                                <p class="text-blue-400 text-xs font-bold uppercase tracking-widest">Selling Price</p>
                                <h3 id="final-1" class="text-4xl font-black tracking-tight">₹0</h3>
                            </div>
                            <button onclick="copyPrice(1)" class="p-3 bg-blue-600 hover:bg-blue-500 rounded-full transition-all active:scale-90" title="Copy Price">
                                <svg id="copy-icon-1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                                <svg id="check-icon-1" class="hidden text-white" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                            </button>
                        </div>
                        <div class="mt-6 flex items-center justify-between text-xs text-slate-400 border-t border-slate-800 pt-4">
                            <span>Est. Settlement: <b id="settlement-1" class="text-green-400">₹0.00</b></span>
                            <span id="gst-label-1">Includes 18% GST</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calculator Card 2 -->
            <div id="card-2" class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden flex flex-col h-full">
                <div class="p-6 border-b border-slate-50 flex justify-between items-center bg-slate-50/50">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-xl bg-indigo-600 flex items-center justify-center text-white shadow-lg shadow-indigo-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>
                        </div>
                        <h2 class="text-lg font-bold text-slate-800">Comparison Set</h2>
                    </div>
                    <div class="text-[10px] font-bold bg-indigo-100 text-indigo-700 px-2 py-1 rounded uppercase">SKU B</div>
                </div>

                <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-1">
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Product Cost (₹)</label>
                        <input type="number" data-calc="2" data-field="cost" value="200" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-indigo-500 outline-none font-medium">
                    </div>
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Marketplace Fee (₹)</label>
                        <input type="number" data-calc="2" data-field="commission" value="20" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-indigo-500 outline-none font-medium">
                    </div>
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Shipping (₹)</label>
                        <input type="number" data-calc="2" data-field="shipping" value="60" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-indigo-500 outline-none font-medium">
                    </div>
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Packaging (₹)</label>
                        <input type="number" data-calc="2" data-field="packaging" value="15" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-indigo-500 outline-none font-medium">
                    </div>
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Return Rate (%)</label>
                        <input type="number" data-calc="2" data-field="returnRate" value="12" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-indigo-500 outline-none font-medium">
                    </div>
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Promo Rate (%)</label>
                        <input type="number" data-calc="2" data-field="promoRate" value="5" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-indigo-500 outline-none font-medium">
                    </div>
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Target Profit (₹)</label>
                        <input type="number" data-calc="2" data-field="margin" value="100" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-indigo-500 outline-none font-medium">
                    </div>
                    <div class="flex flex-col gap-1.5 mb-4">
                        <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">GST Rate</label>
                        <select data-calc="2" data-field="gstRate" class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-indigo-500 outline-none cursor-pointer font-medium appearance-none">
                            <option value="0">0% (Exempt)</option>
                            <option value="0.05">5%</option>
                            <option value="0.12" selected>12%</option>
                            <option value="0.18">18%</option>
                            <option value="0.28">28%</option>
                        </select>
                    </div>
                </div>

                <!-- Card 2 Footer / Results -->
                <div class="mt-auto bg-slate-900 p-6 text-white">
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="p-3 bg-slate-800/50 rounded-xl border border-slate-700/50">
                            <p class="text-slate-400 text-[10px] uppercase font-bold tracking-widest mb-1">Pre-GST Total</p>
                            <p id="total-2" class="text-xl font-mono">₹0.00</p>
                        </div>
                        <div class="p-3 bg-slate-800/50 rounded-xl border border-slate-700/50">
                            <p class="text-slate-400 text-[10px] uppercase font-bold tracking-widest mb-1">GST Tax</p>
                            <p id="gst-2" class="text-xl font-mono text-indigo-400">₹0.00</p>
                        </div>
                    </div>
                    <div class="relative">
                        <div class="flex justify-between items-end mb-2">
                            <div>
                                <p class="text-indigo-400 text-xs font-bold uppercase tracking-widest">Selling Price</p>
                                <h3 id="final-2" class="text-4xl font-black tracking-tight">₹0</h3>
                            </div>
                            <button onclick="copyPrice(2)" class="p-3 bg-indigo-600 hover:bg-indigo-500 rounded-full transition-all active:scale-90" title="Copy Price">
                                <svg id="copy-icon-2" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                                <svg id="check-icon-2" class="hidden text-white" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                            </button>
                        </div>
                        <div class="mt-6 flex items-center justify-between text-xs text-slate-400 border-t border-slate-800 pt-4">
                            <span>Est. Settlement: <b id="settlement-2" class="text-green-400">₹0.00</b></span>
                            <span id="gst-label-2">Includes 12% GST</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Strategy Section -->
        <section class="mt-12">
            <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm">
                <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                    <svg class="text-blue-600" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>
                    Pricing Strategy Guide
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="p-4 rounded-xl bg-slate-50 border border-slate-100">
                        <p class="text-sm font-bold text-slate-700 mb-1">Marketplace Efficiency</p>
                        <p class="text-xs text-slate-500 leading-relaxed">Ensure all marketplace fees are accounted for. If Flipkart charges a fixed fee per order, add it to the Marketplace Fee field.</p>
                    </div>
                    <div class="p-4 rounded-xl bg-slate-50 border border-slate-100">
                        <p class="text-sm font-bold text-slate-700 mb-1">Return Protection</p>
                        <p class="text-xs text-slate-500 leading-relaxed">Returns can eat 20% of profits. We calculate Return Risk based on product cost to safeguard your operational expenses.</p>
                    </div>
                    <div class="p-4 rounded-xl bg-slate-50 border border-slate-100">
                        <p class="text-sm font-bold text-slate-700 mb-1">Net Settlement</p>
                        <p class="text-xs text-slate-500 leading-relaxed">The settlement figure is what you receive after marketplace deductions. Use this to verify your actual profit per sale.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="mt-12 text-center text-slate-400 text-xs py-8 border-t border-slate-200">
            <p>© 2026 E-commerce Pricing Engine. Optimised for HTML5/JS Performance.</p>
        </footer>
    </div>

    <script>
        // Store states for both calculators
        const state = {
            1: { cost: 100, commission: 15, shipping: 40, packaging: 10, returnRate: 10, promoRate: 10, margin: 50, gstRate: 0.18 },
            2: { cost: 200, commission: 20, shipping: 60, packaging: 15, returnRate: 12, promoRate: 5, margin: 100, gstRate: 0.12 }
        };

        function calculate(id) {
            const s = state[id];
            
            // Logic derived from the React implementation
            const returnCost = s.cost * (s.returnRate / 100);
            const promoCost = s.cost * (s.promoRate / 100);
            
            const totalBeforeGst = 
                parseFloat(s.cost) + 
                parseFloat(s.commission) + 
                parseFloat(s.shipping) + 
                parseFloat(s.packaging) + 
                returnCost + 
                promoCost + 
                parseFloat(s.margin);

            const gstAmount = totalBeforeGst * s.gstRate;
            const sellingPrice = totalBeforeGst + gstAmount;
            
            // Settlement = What seller gets after fees and taxes
            // Logic: Price - GST on Price - Commission - Shipping
            const settlement = sellingPrice - (sellingPrice * s.gstRate) - parseFloat(s.commission) - parseFloat(s.shipping);

            // Update UI
            document.getElementById(`total-${id}`).textContent = `₹${totalBeforeGst.toFixed(2)}`;
            document.getElementById(`gst-${id}`).textContent = `₹${gstAmount.toFixed(2)}`;
            document.getElementById(`final-${id}`).textContent = `₹${Math.round(sellingPrice)}`;
            document.getElementById(`settlement-${id}`).textContent = `₹${settlement.toFixed(2)}`;
            document.getElementById(`gst-label-${id}`).textContent = `Includes ${(s.gstRate * 100).toFixed(0)}% GST`;
        }

        function copyPrice(id) {
            const priceText = document.getElementById(`final-${id}`).textContent.replace('₹', '');
            
            // Mandatory fallback logic for clipboard
            const tempInput = document.createElement("input");
            tempInput.value = priceText;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand("copy");
            document.body.removeChild(tempInput);

            // Visual Feedback
            const copyIcon = document.getElementById(`copy-icon-${id}`);
            const checkIcon = document.getElementById(`check-icon-${id}`);
            
            copyIcon.classList.add('hidden');
            checkIcon.classList.remove('hidden');
            
            setTimeout(() => {
                copyIcon.classList.remove('hidden');
                checkIcon.classList.add('hidden');
            }, 2000);
        }

        // Initialize Listeners
        document.querySelectorAll('input, select').forEach(element => {
            element.addEventListener('input', (e) => {
                const id = e.target.getAttribute('data-calc');
                const field = e.target.getAttribute('data-field');
                const val = parseFloat(e.target.value) || 0;
                
                state[id][field] = val;
                calculate(id);
            });
        });

        // Run initial calculations
        calculate(1);
        calculate(2);
    </script>
</body>
</html>
